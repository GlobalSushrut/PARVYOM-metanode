<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTTPCG Real App Demo - Live on Internet</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            min-height: 100vh; 
            color: white;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { 
            background: rgba(255,255,255,0.1); 
            backdrop-filter: blur(10px); 
            padding: 30px; 
            border-radius: 15px; 
            margin-bottom: 30px; 
            text-align: center;
        }
        .app-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); 
            gap: 20px; 
            margin-bottom: 30px;
        }
        .app-card { 
            background: rgba(255,255,255,0.1); 
            backdrop-filter: blur(10px); 
            padding: 25px; 
            border-radius: 15px; 
            border: 1px solid rgba(255,255,255,0.2);
        }
        .btn { 
            background: #4CAF50; 
            color: white; 
            padding: 12px 24px; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-size: 16px; 
            margin: 5px;
            transition: all 0.3s ease;
        }
        .btn:hover { background: #45a049; transform: translateY(-2px); }
        .btn-primary { background: #2196F3; }
        .btn-primary:hover { background: #1976D2; }
        .btn-danger { background: #f44336; }
        .btn-danger:hover { background: #d32f2f; }
        .input-group { margin: 15px 0; }
        .input-group input, .input-group textarea { 
            width: 100%; 
            padding: 12px; 
            border: none; 
            border-radius: 8px; 
            background: rgba(255,255,255,0.9); 
            color: #333;
        }
        .status { 
            padding: 10px; 
            border-radius: 8px; 
            margin: 10px 0; 
            font-weight: bold;
        }
        .status-success { background: rgba(76, 175, 80, 0.3); }
        .status-error { background: rgba(244, 67, 54, 0.3); }
        .status-info { background: rgba(33, 150, 243, 0.3); }
        .live-data { 
            background: rgba(255,255,255,0.1); 
            padding: 15px; 
            border-radius: 8px; 
            margin: 10px 0;
        }
        .protocol-badge { 
            background: #FF9800; 
            color: white; 
            padding: 5px 15px; 
            border-radius: 20px; 
            font-size: 14px; 
            display: inline-block;
            margin: 5px;
        }
        .feature-list { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
            gap: 10px; 
            margin: 20px 0;
        }
        .feature-item { 
            background: rgba(255,255,255,0.1); 
            padding: 10px; 
            border-radius: 8px; 
            text-align: center;
        }
        .real-time-display { 
            font-family: 'Courier New', monospace; 
            background: rgba(0,0,0,0.3); 
            padding: 15px; 
            border-radius: 8px; 
            margin: 10px 0;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåê HTTPCG Real Application Demo</h1>
            <p>üöÄ <strong>Live Interactive Web App on HTTPCG Protocol</strong></p>
            <div>
                <span class="protocol-badge">HTTPCG://LIVE</span>
                <span class="protocol-badge">REAL INTERNET</span>
                <span class="protocol-badge">INTERACTIVE JS</span>
            </div>
            <p id="current-url" style="margin-top: 15px; font-size: 18px;"></p>
        </div>

        <div class="app-grid">
            <!-- Real-Time Clock App -->
            <div class="app-card">
                <h2>‚è∞ Real-Time Clock</h2>
                <div class="live-data">
                    <div id="clock" style="font-size: 2em; text-align: center;"></div>
                    <div id="date" style="text-align: center; margin-top: 10px;"></div>
                </div>
                <button class="btn" onclick="toggleTimeZone()">Toggle Timezone</button>
            </div>

            <!-- Interactive Calculator -->
            <div class="app-card">
                <h2>üßÆ Calculator</h2>
                <div class="input-group">
                    <input type="number" id="num1" placeholder="First number">
                </div>
                <div class="input-group">
                    <input type="number" id="num2" placeholder="Second number">
                </div>
                <div>
                    <button class="btn" onclick="calculate('+')">+</button>
                    <button class="btn" onclick="calculate('-')">-</button>
                    <button class="btn" onclick="calculate('*')">√ó</button>
                    <button class="btn" onclick="calculate('/')">/</button>
                </div>
                <div id="calc-result" class="live-data" style="text-align: center; font-size: 1.5em;"></div>
            </div>

            <!-- Live Network Status -->
            <div class="app-card">
                <h2>üåê Network Status</h2>
                <div class="live-data">
                    <p><strong>Connection:</strong> <span id="connection-status"></span></p>
                    <p><strong>Protocol:</strong> HTTPCG/1.1</p>
                    <p><strong>Server:</strong> <span id="server-info"></span></p>
                    <p><strong>Latency:</strong> <span id="latency"></span></p>
                </div>
                <button class="btn btn-primary" onclick="testConnection()">Test Connection</button>
            </div>

            <!-- Interactive Todo List -->
            <div class="app-card">
                <h2>üìù Todo List</h2>
                <div class="input-group">
                    <input type="text" id="todo-input" placeholder="Enter a task">
                    <button class="btn" onclick="addTodo()">Add Task</button>
                </div>
                <div id="todo-list" class="live-data"></div>
                <button class="btn btn-danger" onclick="clearTodos()">Clear All</button>
            </div>

            <!-- Real API Integration -->
            <div class="app-card">
                <h2>üîó API Integration</h2>
                <p>Fetch real data from APIs:</p>
                <button class="btn btn-primary" onclick="fetchRandomFact()">Random Fact</button>
                <button class="btn btn-primary" onclick="fetchWeather()">Weather</button>
                <div id="api-result" class="live-data" style="min-height: 100px;"></div>
            </div>

            <!-- Interactive Chart -->
            <div class="app-card">
                <h2>üìä Live Data Chart</h2>
                <canvas id="dataChart" width="300" height="150" style="background: rgba(255,255,255,0.1); border-radius: 8px;"></canvas>
                <button class="btn" onclick="updateChart()">Update Data</button>
            </div>
        </div>

        <!-- Real-Time Log -->
        <div class="app-card">
            <h2>üìã Real-Time Activity Log</h2>
            <div id="activity-log" class="real-time-display"></div>
            <button class="btn btn-primary" onclick="clearLog()">Clear Log</button>
        </div>

        <!-- HTTPCG Features Demo -->
        <div class="app-card">
            <h2>üöÄ HTTPCG Protocol Features</h2>
            <div class="feature-list">
                <div class="feature-item">‚úÖ Real JavaScript</div>
                <div class="feature-item">‚úÖ Interactive UI</div>
                <div class="feature-item">‚úÖ Live Updates</div>
                <div class="feature-item">‚úÖ API Integration</div>
                <div class="feature-item">‚úÖ Local Storage</div>
                <div class="feature-item">‚úÖ Real-Time Data</div>
            </div>
            <p>This application demonstrates that HTTPCG can host real, interactive web applications with full JavaScript functionality, just like traditional HTTPS websites.</p>
        </div>
    </div>

    <script>
        // Global variables
        let currentTimeZone = 'local';
        let todos = JSON.parse(localStorage.getItem('httpcg-todos') || '[]');
        let activityLog = [];

        // Initialize the application
        function init() {
            updateClock();
            updateNetworkStatus();
            renderTodos();
            logActivity('Application initialized');
            document.getElementById('current-url').textContent = window.location.href;
            
            // Start real-time updates
            setInterval(updateClock, 1000);
            setInterval(updateNetworkStatus, 5000);
        }

        // Real-time clock functionality
        function updateClock() {
            const now = new Date();
            const timeOptions = { 
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit',
                timeZone: currentTimeZone === 'utc' ? 'UTC' : undefined
            };
            const dateOptions = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                timeZone: currentTimeZone === 'utc' ? 'UTC' : undefined
            };
            
            document.getElementById('clock').textContent = now.toLocaleTimeString('en-US', timeOptions);
            document.getElementById('date').textContent = now.toLocaleDateString('en-US', dateOptions);
        }

        function toggleTimeZone() {
            currentTimeZone = currentTimeZone === 'local' ? 'utc' : 'local';
            logActivity(`Switched to ${currentTimeZone.toUpperCase()} time`);
        }

        // Calculator functionality
        function calculate(operation) {
            const num1 = parseFloat(document.getElementById('num1').value);
            const num2 = parseFloat(document.getElementById('num2').value);
            let result;

            if (isNaN(num1) || isNaN(num2)) {
                result = 'Please enter valid numbers';
            } else {
                switch(operation) {
                    case '+': result = num1 + num2; break;
                    case '-': result = num1 - num2; break;
                    case '*': result = num1 * num2; break;
                    case '/': result = num2 !== 0 ? num1 / num2 : 'Cannot divide by zero'; break;
                }
            }

            document.getElementById('calc-result').textContent = result;
            logActivity(`Calculated: ${num1} ${operation} ${num2} = ${result}`);
        }

        // Network status functionality
        function updateNetworkStatus() {
            const status = navigator.onLine ? 'üü¢ Online' : 'üî¥ Offline';
            document.getElementById('connection-status').textContent = status;
            document.getElementById('server-info').textContent = window.location.host;
            
            // Simulate latency measurement
            const latency = Math.floor(Math.random() * 50) + 10;
            document.getElementById('latency').textContent = `${latency}ms`;
        }

        function testConnection() {
            logActivity('Testing connection...');
            const startTime = Date.now();
            
            fetch(window.location.href)
                .then(response => {
                    const endTime = Date.now();
                    const latency = endTime - startTime;
                    document.getElementById('latency').textContent = `${latency}ms`;
                    logActivity(`Connection test successful - ${latency}ms`);
                })
                .catch(error => {
                    logActivity(`Connection test failed: ${error.message}`);
                });
        }

        // Todo list functionality
        function addTodo() {
            const input = document.getElementById('todo-input');
            const task = input.value.trim();
            
            if (task) {
                todos.push({ id: Date.now(), text: task, completed: false });
                localStorage.setItem('httpcg-todos', JSON.stringify(todos));
                input.value = '';
                renderTodos();
                logActivity(`Added task: ${task}`);
            }
        }

        function renderTodos() {
            const todoList = document.getElementById('todo-list');
            todoList.innerHTML = todos.map(todo => `
                <div style="display: flex; justify-content: space-between; align-items: center; margin: 5px 0; padding: 8px; background: rgba(255,255,255,0.1); border-radius: 5px;">
                    <span style="${todo.completed ? 'text-decoration: line-through; opacity: 0.6;' : ''}">${todo.text}</span>
                    <div>
                        <button class="btn" style="padding: 5px 10px; margin: 2px;" onclick="toggleTodo(${todo.id})">${todo.completed ? '‚Ü∂' : '‚úì'}</button>
                        <button class="btn btn-danger" style="padding: 5px 10px; margin: 2px;" onclick="deleteTodo(${todo.id})">√ó</button>
                    </div>
                </div>
            `).join('');
        }

        function toggleTodo(id) {
            todos = todos.map(todo => 
                todo.id === id ? { ...todo, completed: !todo.completed } : todo
            );
            localStorage.setItem('httpcg-todos', JSON.stringify(todos));
            renderTodos();
            logActivity(`Toggled task completion`);
        }

        function deleteTodo(id) {
            todos = todos.filter(todo => todo.id !== id);
            localStorage.setItem('httpcg-todos', JSON.stringify(todos));
            renderTodos();
            logActivity(`Deleted task`);
        }

        function clearTodos() {
            todos = [];
            localStorage.setItem('httpcg-todos', JSON.stringify(todos));
            renderTodos();
            logActivity('Cleared all tasks');
        }

        // API integration functionality
        function fetchRandomFact() {
            logActivity('Fetching random fact...');
            document.getElementById('api-result').innerHTML = '<p>Loading...</p>';
            
            // Using a CORS-enabled API
            fetch('https://uselessfacts.jsph.pl/random.json?language=en')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('api-result').innerHTML = `<p><strong>Random Fact:</strong> ${data.text}</p>`;
                    logActivity('Random fact loaded successfully');
                })
                .catch(error => {
                    document.getElementById('api-result').innerHTML = `<p style="color: #f44336;">Error: ${error.message}</p>`;
                    logActivity(`API error: ${error.message}`);
                });
        }

        function fetchWeather() {
            logActivity('Fetching weather data...');
            document.getElementById('api-result').innerHTML = '<p>Loading weather...</p>';
            
            // Simulated weather data (replace with real API in production)
            setTimeout(() => {
                const weather = {
                    location: 'Global',
                    temperature: Math.floor(Math.random() * 30) + 10,
                    condition: ['Sunny', 'Cloudy', 'Rainy', 'Partly Cloudy'][Math.floor(Math.random() * 4)]
                };
                
                document.getElementById('api-result').innerHTML = `
                    <p><strong>Weather:</strong> ${weather.condition}</p>
                    <p><strong>Temperature:</strong> ${weather.temperature}¬∞C</p>
                    <p><strong>Location:</strong> ${weather.location}</p>
                `;
                logActivity('Weather data loaded');
            }, 1000);
        }

        // Chart functionality
        function updateChart() {
            const canvas = document.getElementById('dataChart');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Generate random data
            const data = Array.from({length: 10}, () => Math.random() * 100);
            const barWidth = canvas.width / data.length;
            
            // Draw bars
            data.forEach((value, index) => {
                const barHeight = (value / 100) * canvas.height;
                const x = index * barWidth;
                const y = canvas.height - barHeight;
                
                ctx.fillStyle = `hsl(${index * 36}, 70%, 60%)`;
                ctx.fillRect(x, y, barWidth - 2, barHeight);
            });
            
            logActivity('Chart updated with new data');
        }

        // Activity log functionality
        function logActivity(message) {
            const timestamp = new Date().toLocaleTimeString();
            activityLog.unshift(`[${timestamp}] ${message}`);
            
            // Keep only last 20 entries
            if (activityLog.length > 20) {
                activityLog = activityLog.slice(0, 20);
            }
            
            document.getElementById('activity-log').innerHTML = activityLog.join('\n');
        }

        function clearLog() {
            activityLog = [];
            document.getElementById('activity-log').innerHTML = '';
        }

        // Initialize when page loads
        window.addEventListener('load', init);

        // Log page visibility changes
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                logActivity('Page hidden');
            } else {
                logActivity('Page visible');
            }
        });

        // Demonstrate real-time capabilities
        setInterval(() => {
            if (Math.random() < 0.1) { // 10% chance every second
                logActivity('Automatic background process executed');
            }
        }, 1000);

        console.log('üöÄ HTTPCG Real Application Demo loaded successfully!');
        console.log('This is a real interactive web application running on the HTTPCG protocol');
    </script>
</body>
</html>
